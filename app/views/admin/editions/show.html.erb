<% content_for :title, @edition.name %>
<% content_for :breadcrumb, @edition.name %>

<div class="space-y-6">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
    <div>
      <div class="flex items-center gap-3">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white"><%= @edition.name %></h1>
        <% if @edition.is_active %>
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
            Aktywna
          </span>
        <% end %>
      </div>
      <p class="text-gray-600 dark:text-gray-400">Rok: <%= @edition.year %></p>
    </div>
    <div class="flex items-center gap-2">
      <%= link_to edit_admin_edition_path(@edition), class: "inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors" do %>
        Edytuj
      <% end %>
      <% unless @edition.is_active %>
        <%= button_to "Aktywuj", activate_admin_edition_path(@edition), method: :post, class: "inline-flex items-center px-4 py-2 bg-green-500 text-white text-sm font-medium rounded-lg hover:bg-green-600 transition-colors" %>
      <% end %>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Details -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6">
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Szczegóły</h2>
      <dl class="space-y-4">
        <div class="flex justify-between">
          <dt class="text-sm text-gray-500 dark:text-gray-400">Status</dt>
          <dd><%= status_badge(@edition.status) %></dd>
        </div>
        <div class="flex justify-between">
          <dt class="text-sm text-gray-500 dark:text-gray-400">Cena dla liderów</dt>
          <dd class="text-sm font-medium text-gray-900 dark:text-white"><%= number_to_currency(@edition.default_price, unit: "zł", format: "%n %u") %></dd>
        </div>
        <div class="flex justify-between">
          <dt class="text-sm text-gray-500 dark:text-gray-400">Cena dla darczyńców</dt>
          <dd class="text-sm font-medium text-gray-900 dark:text-white"><%= number_to_currency(@edition.donor_price, unit: "zł", format: "%n %u") %></dd>
        </div>
        <div class="flex justify-between">
          <dt class="text-sm text-gray-500 dark:text-gray-400">Zamawianie</dt>
          <dd>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium <%= @edition.ordering_locked ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800' %>">
              <%= @edition.ordering_locked ? "Zablokowane" : "Otwarte" %>
            </span>
          </dd>
        </div>
      </dl>

      <div class="mt-6 flex gap-2">
        <% if @edition.ordering_locked %>
          <%= button_to "Odblokuj zamawianie", unlock_ordering_admin_edition_path(@edition), method: :post, class: "px-3 py-1.5 bg-green-500 text-white text-sm font-medium rounded-lg hover:bg-green-600 transition-colors" %>
        <% else %>
          <%= button_to "Zablokuj zamawianie", lock_ordering_admin_edition_path(@edition), method: :post, class: "px-3 py-1.5 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors" %>
        <% end %>
      </div>
    </div>

    <!-- Inventory -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Magazyn</h2>
        <% if @edition.is_active %>
          <%= link_to "Zarządzaj", admin_inventory_path, class: "text-sm text-brand-500 hover:text-brand-600" %>
        <% end %>
      </div>
      <% if @edition.inventory %>
        <div class="grid grid-cols-2 gap-4">
          <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
            <p class="text-xl font-bold text-gray-900 dark:text-white"><%= @edition.inventory.total_stock %></p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Całkowity</p>
          </div>
          <div class="text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
            <p class="text-xl font-bold text-green-600"><%= @edition.inventory.available %></p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Dostępne</p>
          </div>
          <div class="text-center p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
            <p class="text-xl font-bold text-yellow-600"><%= @edition.inventory.reserved %></p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Zarezerwowane</p>
          </div>
          <div class="text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
            <p class="text-xl font-bold text-blue-600"><%= @edition.inventory.shipped %></p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Wysłane</p>
          </div>
        </div>
      <% else %>
        <p class="text-gray-500 dark:text-gray-400">Brak danych magazynowych</p>
      <% end %>
    </div>
  </div>
</div>
