#!/bin/bash -e

# If running the rails server then create or migrate existing database
# Check if arguments contain both "rails" and "server" (handle any additional args like -b 0.0.0.0)
if [[ "$@" == *"rails"* ]] && [[ "$@" == *"server"* ]]; then
  echo "Running database migrations..."
  ./bin/rails db:prepare
fi

exec "${@}"
